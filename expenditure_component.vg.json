{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "expenditure_component.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {"calculate": "datum.Expenditure * 1", "as": "ExpenditureNum"}
  ],
  "params": [
    {
      "name": "YearSelection",
      "value": "2019",
      "bind": {
        "input": "select",
        "options": ["2019", "2020", "2021", "2022", "2023"],
        "labels": ["2019", "2020", "2021", "2022", "2023"],
        "name": "Select Year: "
      }
    }
  ],
  "hconcat": [
    {
      "title": {
    "text": "Inbound Tourism Expenditure",
    "font": "Open Sans",
    "fontSize": 16,
    "anchor": "middle"
  },
      "transform": [
        {"filter": "datum.Year == YearSelection && datum.Type == 'Inbound'"}
      ],
      "layer": [
        {
          "mark": {"type": "arc", "outerRadius": 150, "innerRadius": 0}
        },
        {
          "mark": {
            "type": "text",
            "radius": 175,
            "align": "center",
            "baseline": "middle"
          },
          "encoding": {
            "theta": {
              "field": "ExpenditureNum",
              "type": "quantitative",
              "stack": true
            },
            "text": {
              "field": "ExpenditureNum",
              "type": "quantitative",
              "format": ".1f"
            }
          }
        }
      ],
      "encoding": {
        "theta": {"field": "ExpenditureNum", "type": "quantitative"},
        "color": {
          "field": "Products",
          "type": "nominal",
          "scale": {
            "range": [
              "#1f77b4", "#ff7f0e", "#9467bd", "#17becf",
              "#e377c2", "#bcbd22", "#8c564b"
            ]
          },
         "legend": {
  "title": "Products",
  "labelLimit": 0,
  "labelFontSize": 12,
  "labelPadding": 20,
  "orient": "right",
  "direction": "vertical"
}
        },
        "tooltip": [
          {"field": "Products", "type": "nominal"},
          {
            "field": "ExpenditureNum",
            "type": "quantitative",
            "title": "Expenditure (Million)"
          }
        ]
      },
      "view": {"stroke": null}
    },
    {
      "title": {
    "text": "Domestic Tourism Expenditure",
    "font": "Open Sans",
    "fontSize": 16,
    "anchor": "middle"
  },
      "transform": [
        {"filter": "datum.Year == YearSelection && datum.Type == 'Domestic'"}
      ],
      "layer": [
        {
          "mark": {"type": "arc", "outerRadius": 150, "innerRadius": 0}
        },
        {
          "mark": {
            "type": "text",
            "radius": 175,
            "align": "center",
            "baseline": "middle"
          },
          "encoding": {
            "theta": {
              "field": "ExpenditureNum",
              "type": "quantitative",
              "stack": true
            },
            "text": {
              "field": "ExpenditureNum",
              "type": "quantitative",
              "format": ".1f"
            }
          }
        }
      ],
      "encoding": {
        "theta": {"field": "ExpenditureNum", "type": "quantitative"},
        "color": {
          "field": "Products",
          "type": "nominal",
          "scale": {
            "range": [
              "#1f77b4", "#ff7f0e", "#9467bd", "#17becf",
              "#e377c2", "#bcbd22", "#7f7f7f", "#8c564b"
            ]
          },
          "legend": {
            "title": "Products",
            "labelLimit": 0,
            "labelFontSize": 12,
            "labelPadding": 20
          }
        },
        "tooltip": [
          {"field": "Products", "type": "nominal"},
          {
            "field": "ExpenditureNum",
            "type": "quantitative",
            "title": "Expenditure (Million)"
          }
        ]
      },
      "view": {"stroke": null}
    }
  ],
  "spacing": 50,
  "config": {
  "view": {"continuousWidth": 400, "continuousHeight": 400},
  "arc": {"innerRadius": 0, "stroke": "white", "strokeWidth": 1.5},
  "title": {"font": "Open Sans", "fontSize": 16, "anchor": "middle"},
  "legend": {
    "orient": "bottom",
    "direction": "horizontal",
    "labelLimit": 0,
    "labelFontSize": 12,
    "labelPadding": 20,
    "symbolSize": 150,
    "offset": 30
  }
}
}
